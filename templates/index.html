<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tablet Classifier</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">TabletSorter</div>
    <ul class="nav-links">
      <li><a href="#hero">Home</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#upload">Upload</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>  

  <!-- Hero Section -->
  <section class="hero" id="hero">
    <div class="hero-container">
      <div class="hero-text">
        <h1>Tablet Image Classifier</h1>
        <p>Upload an image to find which row your tablet belongs to using AI-based OCR + CNN analysis.</p>
        <div class="hero-buttons">
          <a href="#upload"><button class="btn primary-btn">Get Started</button></a>
          <a href="#about"><button class="btn secondary-btn">Learn More</button>
          </a>
        </div>
      </div>
      <div class="hero-image">
        <img src="https://images.pexels.com/photos/9902135/pexels-photo-9902135.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Tablet Grid Preview" >
      </div>
    </div>
  </section>
  
  

  <!-- About Section -->
  <section class="about" id="about">
    <h2>About</h2>
    <p>This tool uses a hybrid OCR + CNN approach to identify tablet names from image inputs and maps them to alphabetical rows.</p>
  </section>

  <!-- Upload Section -->
  <section class="upload" id="upload">
    <h2>Upload Tablet Image</h2>
    <form id="uploadForm" enctype="multipart/form-data">
      <input type="file" name="file" id="fileInput" accept="image/*" required>
      <button type="submit">Classify</button>
    </form>
    <p id="result" class="result-text"></p>
  </section>

  <!-- Contact Section -->
  <section class="contact" id="contact">
    <h2>Contact</h2>
    <p>Email: support@tabletsorter.com</p>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 TabletSorter. All rights reserved.</p>
  </footer>

  <!-- JS Scripts -->
  <script>
    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });

    // Text-to-speech
    function speakText(text) {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'en-US';
        utterance.rate = 1;
        window.speechSynthesis.cancel(); // Clear queue
        window.speechSynthesis.speak(utterance);
      }
    }

    // File upload and result
    document.getElementById("uploadForm").addEventListener("submit", async function (e) {
  e.preventDefault();
  const formData = new FormData(this);
  const response = await fetch("/predict", {
    method: "POST",
    body: formData
  });
  const result = await response.json();

  let message;
  if (result.row && result.tablet_name) {
    message = `Tablet Name: "${result.tablet_name}" 
                Row Number: ${result.row}.`;
    speakText(message);
  } else {
    message = "Unable to detect tablet name. Please try another image.";
  }

  document.getElementById("result").textContent = message;
  console.log("Server response:", result);
});

  </script>
</body>
</html>
